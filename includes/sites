<h1 id="sites">Sites</h1>

<h2 id="search-by-hostname-get-sites-hostname-hostname">Search by <code class="prettyprint">hostname</code> <code class="prettyprint">GET /sites?hostname={hostname}</code></h2>
<pre class="highlight shell"><code><span class="c"># curl --include \</span>
     --header <span class="s2">"Authorization: Token </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     --header <span class="s2">"Accept: application/vnd.salemove.v1+json"</span> <span class="se">\</span>
  <span class="s1">'https://api.salemove.com/sites?hostname=salemove.com'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">token</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">strip</span>
<span class="n">hostname</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">strip</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:authorization</span> <span class="o">=&gt;</span> <span class="s2">"Token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="ss">:accept</span> <span class="o">=&gt;</span> <span class="s1">'application/vnd.salemove.v1+json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span> <span class="s2">"https://api.salemove.com/sites?hostname=</span><span class="si">#{</span><span class="n">hostname</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">headers</span>
</code></pre>

<blockquote>
<p>Generates the output</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"last_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites?hostname=salemove.com&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sites"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites/8a832fe9-db22-48ac-a3ef-b25bf0d9db95"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8a832fe9-db22-48ac-a3ef-b25bf0d9db95"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"salemove.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"salemove.cars2go.mobi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"auto.salemove.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"webflow.io"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>A site can have one ore more <code class="prettyprint">addresses</code> where an <code class="prettyprint">address</code> is a combination of <code class="prettyprint">hostname</code> + <code class="prettyprint">path</code>. As an example a valid address is <code class="prettyprint">salemove.com/auto</code> where <code class="prettyprint">hostname</code>=<code class="prettyprint">salemove.com</code> and <code class="prettyprint">path</code>=<code class="prettyprint">/auto</code>.</p>

<p>This endpoint fetches a list of sites that have the <code class="prettyprint">hostname</code> within the site&rsquo;s addresses.</p>

<h2 id="post-sites">POST <code class="prettyprint">/sites</code></h2>
<pre class="highlight shell"><code>curl --include <span class="se">\</span>
     --request POST <span class="se">\</span>
     --header <span class="s2">"Authorization: Token </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     --header <span class="s2">"Accept: application/vnd.salemove.v1+json"</span> <span class="se">\</span>
     --data-binary <span class="s2">"    {
      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">New site name</span><span class="se">\"</span><span class="s2">,
      </span><span class="se">\"</span><span class="s2">addresses</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">sub.whitelisteddomain.com</span><span class="se">\"</span><span class="s2">]
    }"</span> <span class="se">\</span>
<span class="s1">'https://api.salemove.com/sites'</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">token</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">strip</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"My New Site"</span><span class="p">,</span>
  <span class="s2">"addresses"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"sub.whitelisteddomain.com"</span> <span class="p">]</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:authorization</span> <span class="o">=&gt;</span> <span class="s2">"Token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="ss">:accept</span> <span class="o">=&gt;</span> <span class="s1">'application/vnd.salemove.v1+json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s2">"https://api.salemove.com/sites"</span><span class="p">,</span> <span class="n">values</span><span class="p">.</span><span class="nf">to_json</span><span class="p">,</span> <span class="n">headers</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre>

<blockquote>
<p>Generates the output</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites/05dd4b39-52df-401a-9dd7-1e1af0aff783"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05dd4b39-52df-401a-9dd7-1e1af0aff783"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"sub.whitelisteddomain.com"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New site name"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"salemove_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>An operator with <code class="prettyprint">manager</code> privileges can use the API token associated to the account to create new sites.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The name for the new site</td>
</tr>
<tr>
<td><code class="prettyprint">addresses</code></td>
<td><code class="prettyprint">array</code></td>
<td>Yes</td>
<td>A list of site&rsquo;s addresses</td>
</tr>
<tr>
<td><code class="prettyprint">clone_from_id</code></td>
<td><code class="prettyprint">string</code></td>
<td>No</td>
<td>The new site will be configured using this <code class="prettyprint">site_id</code> as template. The new site will copy the visuals, teams and business rules from the <code class="prettyprint">site_id</code> passed in this parameter.</td>
</tr>
</tbody></table>

<h2 id="get-sites-id">GET <code class="prettyprint">/sites/{id}</code></h2>
<pre class="highlight shell"><code>curl --include <span class="se">\</span>
     --header <span class="s2">"Authorization: Token </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     --header <span class="s2">"Accept: application/vnd.salemove.v1+json"</span> <span class="se">\</span>
  <span class="s2">"https://api.salemove.com/sites/</span><span class="nv">$siteId</span><span class="s2">"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">token</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">strip</span>
<span class="n">site_id</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">strip</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:authorization</span> <span class="o">=&gt;</span> <span class="s2">"Token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="ss">:accept</span> <span class="o">=&gt;</span> <span class="s1">'application/vnd.salemove.v1+json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span> <span class="s2">"https://api.salemove.com/sites/</span><span class="si">#{</span><span class="n">site_id</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>  <span class="n">headers</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">body</span>
</code></pre>

<blockquote>
<p>Generates the output</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites/47e2cb4c-d3d2-48ea-9a8f-604ed837410f"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47e2cb4c-d3d2-48ea-9a8f-604ed837410f"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hostnames"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"beta.carlospaniagua.io"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Carlos Beta"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"salemove_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>It fetches the site with id <code class="prettyprint">id</code>. The operator whose API token is used to send the request should have rights on the site with id <code class="prettyprint">id</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The site <code class="prettyprint">id</code> that is requested</td>
</tr>
</tbody></table>

<h2 id="put-sites-id">PUT <code class="prettyprint">/sites/{id}</code></h2>
<pre class="highlight shell"><code><span class="c"># curl --include \</span>
     --request PUT <span class="se">\</span>
     --header <span class="s2">"Authorization: Token </span><span class="nv">$token</span><span class="s2">"</span> <span class="se">\</span>
     --header <span class="s2">"Accept: application/vnd.salemove.v1+json"</span> <span class="se">\</span>
     --data-binary <span class="s2">"{
  </span><span class="se">\"</span><span class="s2">salemove_enabled</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">true</span><span class="se">\"</span><span class="s2">,
  </span><span class="se">\"</span><span class="s2">reactive_enabled</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">false</span><span class="se">\"</span><span class="s2">,
  </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">New site name</span><span class="se">\"</span><span class="s2">,
  </span><span class="se">\"</span><span class="s2">domains</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\"</span><span class="s2">mobile.domain.com</span><span class="se">\"</span><span class="s2">]
}"</span> <span class="se">\</span>
<span class="s2">"https://api.salemove.com/sites/</span><span class="nv">$siteId</span><span class="s2">"</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1">#!/usr/bin/env ruby</span>
<span class="nb">require</span> <span class="s1">'rubygems'</span>
<span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">token</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">strip</span>
<span class="n">siteId</span> <span class="o">=</span> <span class="no">ARGV</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nf">strip</span>

<span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"My New Site"</span><span class="p">,</span>
  <span class="s2">"domains"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"new.whitelisteddomain.com"</span> <span class="p">],</span>
  <span class="s2">"salemove_enabled"</span><span class="p">:</span> <span class="kp">false</span><span class="p">,</span>
  <span class="s2">"reactive_enabled"</span><span class="p">:</span> <span class="kp">false</span>
<span class="p">}</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:authorization</span> <span class="o">=&gt;</span> <span class="s2">"Token </span><span class="si">#{</span><span class="n">token</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="ss">:accept</span> <span class="o">=&gt;</span> <span class="s1">'application/vnd.salemove.v1+json'</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">put</span> <span class="s2">"https://api.salemove.com/sites/</span><span class="si">#{</span><span class="n">siteId</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">values</span><span class="p">.</span><span class="nf">to_json</span><span class="p">,</span> <span class="n">headers</span>
<span class="nb">puts</span> <span class="n">response</span>
</code></pre>

<blockquote>
<p>Generates the output</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Content-Type: application/json
Date: Thu, 21 Jul 2016 12:56:47 GMT
Server: nginx/1.9.15
X-Content-Type-Options: nosniff
Content-Length: 203
Connection: keep-alive

{
  "href": "https://api.salemove.com/sites/47e2cb4c-d3d2-48ea-9a8f-604ed837410f",
  "id": "47e2cb4c-d3d2-48ea-9a8f-604ed837410f",
  "hostnames": ["mobile.domain.com"],
  "name": "New site name",
  "salemove_enabled": true
}

</code></pre>

<p>It updates the site with id <code class="prettyprint">id</code>. The operator whose API token is used to send the request should have rghts on the site with id <code class="prettyprint">id</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The site <code class="prettyprint">id</code> that is being updated</td>
</tr>
<tr>
<td><code class="prettyprint">salemove_enabled</code></td>
<td><code class="prettyprint">boolean</code></td>
<td>No</td>
<td>if <code class="prettyprint">true</code> then it enables SaleMove for the Site, if <code class="prettyprint">false</code> it disables SaleMove for the site. When SaleMove is enabled the SaleMove integration is delivered otherwise a <code class="prettyprint">204</code> <code class="prettyprint">No-Content</code> is delivered</td>
</tr>
<tr>
<td><code class="prettyprint">reactive_enabled</code></td>
<td><code class="prettyprint">boolean</code></td>
<td>No</td>
<td>If <code class="prettyprint">true</code> then the Reactive Tab is shown to the visitor. If <code class="prettyprint">false</code> then the Reactive Tab is hidden to the visitor.</td>
</tr>
<tr>
<td><code class="prettyprint">clone_from_id</code></td>
<td><code class="prettyprint">string</code></td>
<td>No</td>
<td>The new site will be configured using this <code class="prettyprint">site_id</code> as template. The new site will copy the visuals, teams and business rules from the <code class="prettyprint">site_id</code> passed in this parameter.</td>
</tr>
</tbody></table>
