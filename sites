<h1 id="sites">Sites</h1>

<h2 id="search-by-hostname-get-sites-hostname-hostname">Search by <code class="prettyprint">hostname</code> <code class="prettyprint">GET /sites?hostname={hostname}</code></h2>

<p>A site can have one ore more <code class="prettyprint">addresses</code> where an <code class="prettyprint">address</code> is a combination of <code class="prettyprint">hostname</code> + <code class="prettyprint">path</code>. As an example a valid address is <code class="prettyprint">salemove.com/auto</code> where <code class="prettyprint">hostname</code>=<code class="prettyprint">salemove.com</code> and <code class="prettyprint">path</code>=<code class="prettyprint">/auto</code>.</p>

<p>This endpoint fetches a list of sites that have the <code class="prettyprint">hostname</code> within the site&rsquo;s addresses.</p>

<p>Response
<code class="prettyprint">
HTTP/1.1 200 OK
Content-Type: application/json
Date: Thu, 21 Jul 2016 12:23:24 GMT
Server: nginx/1.9.15
X-Content-Type-Options: nosniff
Content-Length: 322
Connection: keep-alive
</code></p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"last_page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites?hostname=salemove.com&amp;page=1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sites"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.salemove.com/sites/8a832fe9-db22-48ac-a3ef-b25bf0d9db95"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8a832fe9-db22-48ac-a3ef-b25bf0d9db95"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"salemove.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"salemove.cars2go.mobi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"auto.salemove.com"</span><span class="p">,</span><span class="w"> </span><span class="s2">"webflow.io"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>CURL
<code class="prettyprint">
curl --include \
     --header &quot;Authorization: Token $token&quot; \
     --header &quot;Accept: application/vnd.salemove.v1+json&quot; \
  &#39;https://api.salemove.com/sites?hostname=salemove.com&#39;
</code></p>

<p>Ruby
&ldquo;`</p>

<h1 id="usr-bin-env-ruby">!/usr/bin/env ruby</h1>

<p>require &lsquo;rubygems&rsquo;
require &#39;rest-client&rsquo;
require &#39;json&rsquo;</p>

<p>token = ARGV[0].strip
hostname = ARGV[1].strip</p>

<p>headers = {
  :authorization =&gt; &quot;Token #{token}&rdquo;,
  :accept =&gt; &#39;application/vnd.salemove.v1+json&rsquo;
}</p>

<p>response = RestClient.get &ldquo;https://api.salemove.com/sites?hostname=#{hostname}&rdquo;, headers
&ldquo;`</p>

<h2 id="post-sites">POST <code class="prettyprint">/sites</code></h2>

<p>An operator with <code class="prettyprint">manager</code> privileges can use the API token associated to the account to create new sites.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">name</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The name for the new site</td>
</tr>
<tr>
<td><code class="prettyprint">domains</code></td>
<td><code class="prettyprint">array</code></td>
<td>Yes</td>
<td>A list of site&rsquo;s addresses</td>
</tr>
<tr>
<td><code class="prettyprint">clone_from_id</code></td>
<td><code class="prettyprint">string</code></td>
<td>No</td>
<td>The new site will be configured using this <code class="prettyprint">site_id</code> as template. The new site will copy the visuals, teams and business rules from the <code class="prettyprint">site_id</code> passed in this parameter.</td>
</tr>
</tbody></table>

<p>Response
<code class="prettyprint">
HTTP/1.1 200 OK
Content-Type: application/json
Date: Thu, 21 Jul 2016 12:35:47 GMT
Server: nginx/1.9.15
X-Content-Type-Options: nosniff
Content-Length: 212
Connection: keep-alive
</code>
<code class="prettyprint">
{
  &quot;href&quot;: &quot;https://api.salemove.com/sites/05dd4b39-52df-401a-9dd7-1e1af0aff783&quot;,
  &quot;id&quot;: &quot;05dd4b39-52df-401a-9dd7-1e1af0aff783&quot;,
  &quot;hostnames&quot;: [&quot;sub.whitelisteddomain.com&quot;],
  &quot;name&quot;: &quot;New site name&quot;,
  &quot;salemove_enabled&quot;: false
}
</code></p>

<p>CURL
<code class="prettyprint">
curl --include \
     --request POST \
     --header &quot;Authorization: Token $token&quot; \
     --header &quot;Accept: application/vnd.salemove.v1+json&quot; \
     --data-binary &quot;    {
      \&quot;name\&quot;: \&quot;New site name\&quot;,
      \&quot;domains\&quot;: [\&quot;sub.whitelisteddomain.com\&quot;]
    }&quot; \
&#39;https://api.salemove.com/sites&#39;
</code></p>

<p>Ruby
&rdquo;`</p>

<h1 id="usr-bin-env-ruby">!/usr/bin/env ruby</h1>

<p>require &#39;rubygems&rsquo;
require &#39;rest-client&rsquo;
require &#39;json&rsquo;</p>

<p>token = ARGV[0].strip</p>

<p>values = {
  &ldquo;name&rdquo;: &ldquo;My New Site&rdquo;,
  &ldquo;domains&rdquo;: [ &ldquo;sub.whitelisteddomain.com&rdquo; ]
}</p>

<p>headers = {
  :authorization =&gt; &ldquo;Token #{token}&rdquo;,
  :accept =&gt; &#39;application/vnd.salemove.v1+json&rsquo;
}</p>

<p>response = RestClient.post &ldquo;https://api.salemove.com/sites&rdquo;, values.to_json, headers
puts response.body
&ldquo;`</p>

<h2 id="get-sites-id">GET <code class="prettyprint">/sites/{id}</code></h2>

<p>It fetches the site with id <code class="prettyprint">id</code>. The operator whose API token is used to send the request should have rights on the site with id <code class="prettyprint">id</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The site <code class="prettyprint">id</code> that is requested</td>
</tr>
</tbody></table>

<p>Response
<code class="prettyprint">
HTTP/1.1 200 OK
Content-Type: application/json
Date: Thu, 21 Jul 2016 12:43:43 GMT
Server: nginx/1.9.15
X-Content-Type-Options: nosniff
Content-Length: 207
Connection: keep-alive
</code>
<code class="prettyprint">
{
    &quot;href&quot;: &quot;https://api.salemove.com/sites/47e2cb4c-d3d2-48ea-9a8f-604ed837410f&quot;,
    &quot;id&quot;: &quot;47e2cb4c-d3d2-48ea-9a8f-604ed837410f&quot;,
    &quot;hostnames&quot;: [&quot;beta.carlospaniagua.io&quot;],
    &quot;name&quot;: &quot;Carlos Beta&quot;,
    &quot;salemove_enabled&quot;: false
}
</code></p>

<p>CURL
<code class="prettyprint">
curl --include \
     --header &quot;Authorization: Token $token&quot; \
     --header &quot;Accept: application/vnd.salemove.v1+json&quot; \
  &quot;https://api.salemove.com/sites/$siteId&quot;
</code></p>

<p>Ruby
&rdquo;`</p>

<h1 id="usr-bin-env-ruby">!/usr/bin/env ruby</h1>

<p>require &#39;rubygems&rsquo;
require &#39;rest-client&rsquo;
require &#39;json&rsquo;</p>

<p>token = ARGV[0].strip
site_id = ARGV[1].strip</p>

<p>values = {}</p>

<p>headers = {
  :authorization =&gt; &ldquo;Token #{token}&rdquo;,
  :accept =&gt; &#39;application/vnd.salemove.v1+json&rsquo;
}</p>

<p>response = RestClient.get &ldquo;https://api.salemove.com/sites/#{site_id}&rdquo;,  headers
puts response.body
&ldquo;`</p>

<h2 id="put-sites-id">PUT <code class="prettyprint">/sites/{id}</code></h2>

<p>It updates the site with id <code class="prettyprint">id</code>. The operator whose API token is used to send the request should have rghts on the site with id <code class="prettyprint">id</code>.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">id</code></td>
<td><code class="prettyprint">string</code></td>
<td>Yes</td>
<td>The site <code class="prettyprint">id</code> that is being updated</td>
</tr>
<tr>
<td><code class="prettyprint">salemove_enabled</code></td>
<td><code class="prettyprint">boolean</code></td>
<td>No</td>
<td>if <code class="prettyprint">true</code> then it enables SaleMove for the Site, if <code class="prettyprint">false</code> it disables SaleMove for the site. When SaleMove is enabled the SaleMove integration is delivered otherwise a <code class="prettyprint">204</code> <code class="prettyprint">No-Content</code> is delivered</td>
</tr>
<tr>
<td><code class="prettyprint">reactive_enabled</code></td>
<td><code class="prettyprint">boolean</code></td>
<td>No</td>
<td>If <code class="prettyprint">true</code> then the Reactive Tab is shown to the visitor. If <code class="prettyprint">false</code> then the Reactive Tab is hidden to the visitor.</td>
</tr>
<tr>
<td><code class="prettyprint">clone_from_id</code></td>
<td><code class="prettyprint">string</code></td>
<td>No</td>
<td>The new site will be configured using this <code class="prettyprint">site_id</code> as template. The new site will copy the visuals, teams and business rules from the <code class="prettyprint">site_id</code> passed in this parameter.</td>
</tr>
</tbody></table>

<p>Response
<code class="prettyprint">
HTTP/1.1 200 OK
Content-Type: application/json
Date: Thu, 21 Jul 2016 12:56:47 GMT
Server: nginx/1.9.15
X-Content-Type-Options: nosniff
Content-Length: 203
Connection: keep-alive
</code>
<code class="prettyprint">
{
  &quot;href&quot;: &quot;https://api.salemove.com/sites/47e2cb4c-d3d2-48ea-9a8f-604ed837410f&quot;,
  &quot;id&quot;: &quot;47e2cb4c-d3d2-48ea-9a8f-604ed837410f&quot;,
  &quot;hostnames&quot;: [&quot;mobile.domain.com&quot;],
  &quot;name&quot;: &quot;New site name&quot;,
  &quot;salemove_enabled&quot;: true
}
</code></p>

<p>CURL
<code class="prettyprint">
curl --include \
     --request PUT \
     --header &quot;Authorization: Token $token&quot; \
     --header &quot;Accept: application/vnd.salemove.v1+json&quot; \
     --data-binary &quot;{
  \&quot;salemove_enabled\&quot;: \&quot;true\&quot;,
  \&quot;reactive_enabled\&quot;: \&quot;false\&quot;,
  \&quot;name\&quot;: \&quot;New site name\&quot;,
  \&quot;domains\&quot;: [\&quot;mobile.domain.com\&quot;]
}&quot; \
&quot;https://api.salemove.com/sites/$siteId&quot;
</code></p>

<p>Ruby
&rdquo;`</p>

<h1 id="usr-bin-env-ruby">!/usr/bin/env ruby</h1>

<p>require &#39;rubygems&rsquo;
require &#39;rest-client&rsquo;
require &#39;json&rsquo;</p>

<p>token = ARGV[0].strip
siteId = ARGV[1].strip</p>

<p>values = {
  &ldquo;name&rdquo;: &ldquo;My New Site&rdquo;,
  &ldquo;domains&rdquo;: [ &ldquo;new.whitelisteddomain.com&rdquo; ],
  &ldquo;salemove_enabled&rdquo;: false,
  &ldquo;reactive_enabled&rdquo;: false
}</p>

<p>headers = {
  :authorization =&gt; &ldquo;Token #{token}&rdquo;,
  :accept =&gt; &#39;application/vnd.salemove.v1+json&rsquo;
}</p>

<p>response = RestClient.put &ldquo;https://api.salemove.com/sites/#{siteId}&rdquo;, values.to_json, headers
puts response
&ldquo;`</p>
